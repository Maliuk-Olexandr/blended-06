import{a as n,i}from"./vendor-C6gZL8dd.js";const f=1;async function q(){return(await n("https://dummyjson.com/products/category-list")).data}async function _(){const t=`https://dummyjson.com/products?limit=12&skip=${(f-1)*12}`;return(await n(t)).data.products}async function b(t){if(t==="all")return _();const o=`https://dummyjson.com/products/category/${t}?limit=12&skip=${(f-1)*12}`;return(await n(o)).data.products}async function w(t){const o=`https://dummyjson.com/products/${t}`;return(await n(o)).data}async function E(t){const o=`https://dummyjson.com/products/search?q=${t}&limit=12&skip=${(f-1)*12}`;return(await n(o)).data.products}const a={SELECTED_CATEGORY:"selected_category",WISHLIST:"wishlist"};function v(t){localStorage.setItem(a.SELECTED_CATEGORY,t)}function $(){return localStorage.getItem(a.SELECTED_CATEGORY)||"all"}function l(){const t=localStorage.getItem(a.WISHLIST);return t?JSON.parse(t):[]}function P(t){const o=l();o.includes(t)||(o.push(t),localStorage.setItem(a.WISHLIST,JSON.stringify(o)))}function B(t){const e=l().filter(r=>r!==t);localStorage.setItem(a.WISHLIST,JSON.stringify(e))}function S(t){return l().includes(t)}function k(t){const o=document.querySelector(".modal-product__btn--wishlist");if(!o)return;o.textContent=S(t)?"Remove from Wishlist":"Add to Wishlist";const e=o.cloneNode(!0);o.parentNode.replaceChild(e,o),e.addEventListener("click",async()=>{S(t)?(B(t),e.textContent="Add to Wishlist",i.success({title:"Success",message:"Product removed from Wishlist",position:"topRight"})):(P(t),e.textContent="Remove from Wishlist",i.success({title:"Success",message:"Product added to Wishlist",position:"topRight"})),I(),window.location.pathname.includes("wishlist.html")&&await T()})}async function T(){const t=l();if(t.length===0){s.products.innerHTML='<p class="empty-message">Your wishlist is empty.</p>';return}try{const o=t.map(r=>w(r)),e=await Promise.all(o);d(e)}catch(o){console.error("Error loading wishlist products:",o),i.error({title:"Error",message:"Failed to load wishlist products.",position:"topRight"})}}function H(t){const o=$();t.map(r=>r.toLowerCase()).includes(o)||localStorage.setItem("selected_category","all");const e=["All","nobody",...t].map(r=>{const c=r.toLowerCase()===o.toLowerCase()?"categories__btn--active":"";return`<li class="categories__item" data-category="${r.toLowerCase()}">
   <button class="categories__btn ${c}" type="button">${r}</button>
 </li>`}).join("");s.categories.innerHTML=e,s.categories.addEventListener("click",W)}function d(t){if(s.products.innerHTML="",!t||t.length===0){s.notFoundBlock&&s.notFoundBlock.classList.add("not-found--visible");return}s.notFoundBlock&&s.notFoundBlock.classList.remove("not-found--visible");const o=t.map(e=>{const{id:r,title:c,brand:u,category:p,price:m,description:g,images:h}=e,C=h?.[0]||"https://via.placeholder.com/150";return`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${C}" alt="${g}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${u}</span></p>
    <p class="products__category">Category:${p} </p>
    <p class="products__price">Price: ${m}</p>
 </li>`}).join("");s.products.insertAdjacentHTML("beforeend",o)}async function W(t){const o=t.target.closest(".categories__btn");if(!o)return;s.categories.querySelectorAll(".categories__btn").forEach(c=>{c.classList.remove("categories__btn--active")}),o.classList.add("categories__btn--active");const r=o.textContent.trim().toLowerCase();v(r);try{const c=r==="all"?await _():await b(r);d(c)}catch(c){console.error(`Error fetching products for ${r}:`,c),i.error({title:"Error",message:"Failed to fetch products. Please try again later.",position:"topRight"})}}async function A(t){const o=t.target.closest(".products__item");if(!o)return;const e=o.dataset.id;try{const r=await w(e);F(r)}catch(r){i.error({title:"Error",message:"Failed to fetch product details. Please try again later.",position:"topRight"}),console.error(`Error fetching product with ID ${e}:`,r)}}function F(t){if(!s.modalProduct)return;const{id:o,images:e,title:r,description:c,brand:u,category:p,price:m,shippingInformation:g,returnPolicy:h}=t;s.modalProduct.dataset.id=o,s.modalProduct.innerHTML=`
    <img class="modal-product__img" src="${e?.[0]||"https://via.placeholder.com/150"}" alt="${r}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${r}</p>
      <ul class="modal-product__tags">
        <li>Brand: ${u}</li>
        <li>Category: ${p}</li>
      </ul>
      <p class="modal-product__description">${c}</p>
      <p class="modal-product__shipping-information">Shipping: ${g||"N/A"}</p>
      <p class="modal-product__return-policy">Return Policy: ${h||"N/A"}</p>
      <p class="modal-product__price">Price: $${m}</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>`,k(o),s.modal.classList.add("modal--is-open"),L()}function L(){s.modal.addEventListener("click",t=>{(t.target===s.modal||t.target.classList.contains("modal-product__buy-btn"))&&y()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&y()}),s.modalCloseBtn.addEventListener("click",y)}function y(){s.modal.classList.remove("modal--is-open"),s.modalProduct.innerHTML="",s.modal.removeEventListener("click",L)}async function M(t){t.preventDefault();const o=t.target.elements.searchValue.value.trim();if(!o){try{const e=await _();d(e)}catch(e){i.error({title:"Error",message:"Failed to fetch products. Please try again later.",position:"topRight"}),console.error("Error fetching home products:",e)}s.searchForm.reset(),s.notFoundBlock.classList.remove("not-found--visible");return}try{const e=await E(o);e.length===0?(s.notFoundBlock.classList.add("not-found--visible"),s.products.innerHTML=""):(s.notFoundBlock.classList.remove("not-found--visible"),d(e))}catch(e){i.error({title:"Error",message:"Failed to fetch products. Please try again later.",position:"topRight"}),console.error("Error fetching products by search:",e)}s.searchForm.reset()}function I(){const t=l(),o=document.querySelector("[data-wishlist-count]");o&&(o.textContent=t.length,o.style.display=t.length===0?"none":"inline-block")}const s={form:document.querySelector(".search-form"),categories:document.querySelector(".categories"),products:document.querySelector(".products"),notFoundBlock:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),searchFormClearBtn:document.querySelector(".search-form__btn-clear")};export{s as a,$ as b,_ as c,b as d,d as e,M as f,q as g,T as l,A as o,H as r,v as s,I as u};
//# sourceMappingURL=refs-DAAoLujz.js.map
